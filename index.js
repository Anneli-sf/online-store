(()=>{"use strict";const t=(t,e)=>{const o=document.createElement(`${t}`);return o.classList.add(e),o},e=(e,o)=>{const a=t("button","button");return o&&a.classList.add(o),a.innerText=e,a},o=(e,o,a,r,s,c,n,i)=>{const l=t("input",`${e}`);return l.type=o,a&&(l.placeholder=a),r&&(l.value=r),s&&(l.min=s),c&&(l.max=c),n&&(l.readOnly=n),i&&(l.id=i),l},a=(e,o,a)=>{const r=t("label",`${o}`);return a&&r.setAttribute("for",a),r.innerText=e,r},r=(e,o,a,r)=>{const s=t("div","block");s.classList.add(e);const c=t("div","block-header");a&&c.classList.add(a);const n=t("p","block-title");o&&(n.innerHTML=`${o}`);const i=t("div","block-section");return r&&i.classList.add(r),c.append(n),s.prepend(c),s.append(i),s},s=(e,o,a,r,s,c)=>{const n=t("div","block");n.classList.add(e);const i=t("div","block-header");r&&i.classList.add(r);const l=t("p","block-title");s&&(l.innerHTML=`${s}`);const g=t("div","block-section");c&&g.classList.add(c);const u=t("p","block-text");return o&&u.classList.add(o),a&&(u.textContent=""+a),g.append(u),i.append(l),n.prepend(i),n.append(g),n},c=(e,o,a,r)=>{const s=t("img","image");return a&&s.classList.add(a),s.src=e,s.alt=o,s.id=r,s},n=(e,o,a)=>{const r=t("a",o);return r.href=e,a&&(r.textContent=a),r},i=(e,o)=>{const a=t("p",o);return a.innerHTML=`${e}`,a},l=["Спорт","Одежда и аксессуары","Магические предметы","Зелья","Транспорт","Магические существа"],g=["sport","clothes-accessories","magic-items","potions","transport","magical-animals"],u=["Волшебные палочки","Камни","Предметы интерьера","Книжные товары","Оружие","Одежда","Аксессуары","Летающие предметы","Добрые зелья","Положительные существа","Отрицательные существа"],d=["magic-wands","stones","interior-items","books","weapon","clothes","accessories","flying-objects","good-potions","positive-animals","negative-animals"],p=[{id:0,category:"Магические существа",categoryEng:"magical-animals",subcategory:"Отрицательные существа",subcategoryEng:"negative-animals",title:"Василиск",description:"Огромный змей, известный также как «король змей», живущий не одну сотню лет. Очень сильное магическое животное.",price:105,discount:10,stock:5,raiting:4.95,images:["assets/images-storage/vasilisk/vasil1.jpg","assets/images-storage/vasilisk/vasil2.jpg"]},{id:1,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Оружие",subcategoryEng:"weapon",title:"Меч Гриффиндора",description:"Магический предмет исключительной силы. Это одноручный меч (34 дюйма), созданный из чистого серебра, и достаточно лёгкий, чтобы его мог поднять даже подросток. Рукоять меча отделана рубинами, на лезвии клинка видна гравировка «Годрик Гриффиндор».",price:10,discount:10,stock:3,raiting:4.05,images:["assets/images-storage/mech_Griffindora/grif1.png","assets/images-storage/mech_Griffindora/grif2.jpg"]},{id:2,category:"Одежда и аксессуары",categoryEng:"clothes-accessories",subcategory:"Одежда",subcategoryEng:"clothes",title:"Мантия-невидимка",description:"Волшебная мантия из очень лёгкой «серебристой» ткани, делающая невидимым того, кто её надевает. Обычные мантии-невидимки служат очень недолго и их производство очень дорогостоящее. У Гарри была особая мантия-невидимка, так как являлась одним из трех Даров Смерти.",price:15,discount:9,stock:8,raiting:3.98,images:["assets/images-storage/mantiya_nevidimka/mant1.jpg","assets/images-storage/mantiya_nevidimka/mant2.png"]},{id:3,category:"Одежда и аксессуары",categoryEng:"clothes-accessories",subcategory:"Аксессуары",subcategoryEng:"accessories",title:"Кулон Дары Смерти",description:"Символизирует легендарные Дары Смерти. Треугольник означает Мантию-невидимку, круг означает Воскрешающий камень, а линия означает Бузинную палочку. Позже этот знак присвоил себе Геллерт Грин-де-Вальд, сделав этот древний символ знаком своих преступлений.",price:21,discount:3,stock:3,raiting:4,images:["assets/images-storage/kulon_Dari_smerti/kulon1.jpg","assets/images-storage/kulon_Dari_smerti/kulon2.jpg"]},{id:4,category:"Одежда и аксессуары",categoryEng:"clothes-accessories",subcategory:"Аксессуары",subcategoryEng:"accessories",title:"Маховик времени",description:"Волшебный предмет, позволяющий вернуться в недалёкое прошлое. Выглядит как песочные часы, посаженные на ось, которая в свою очередь крепится на длинной золотой цепочке. Маховик времени не может вносить кардинальных изменений в ход событий. Так, например, маховик не может вернуть жизнь убитому человеку.",price:13,discount:5,stock:8,raiting:3.71,images:["assets/images-storage/mahovic_vremeni/mah1.jpg","assets/images-storage/mahovic_vremeni/mah2.jpeg"]},{id:5,category:"Спорт",categoryEng:"sport",subcategory:"Летающие предметы",subcategoryEng:"flying-objects",title:"Золотой снитч",description:"В современном квиддиче это маленький золотистый шарик с серебряными крылышками, летающий самостоятельно и произвольно над полем. Золотой снитч имеет размер грецкого ореха и заколдован избегать поимки как можно дольше. Из-за малых размеров и невероятной скорости за ним почти невозможно уследить.",price:34,discount:10,stock:4,raiting:5,images:["assets/images-storage/snitch/snitch1.jpg","assets/images-storage/snitch/snitch2.jpg"]},{id:6,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Камни",subcategoryEng:"stones",title:"Философский камень",description:"Легендарное вещество, наделённое удивительными силами. По легенде, камень мог превратить любой металл в чистое золото. С его помощью также можно было приготовить эликсир жизни, который делал бессмертным того, кто выпьет этот эликсир.",price:5,discount:0,stock:8,raiting:2.65,images:["assets/images-storage/filosofskii_kamen/stone1.png","assets/images-storage/filosofskii_kamen/stone2.png"]},{id:7,category:"Одежда и аксессуары",categoryEng:"clothes-accessories",subcategory:"Одежда",subcategoryEng:"clothes",title:"Распределяющая шляпа",description:"Шляпа, сорванная со своей головы Годриком Гриффиндоромпри основании школы чародейства и волшебства «Хогвартс». Эта шляпа, по замыслу основателей, должна распределять учеников по 4 факультетам в соответствии с их способностями и склонностями.",price:12,discount:2,stock:6,raiting:4.36,images:["assets/images-storage/raspredelyaushaya_shlyapa/shlyapa1.jpg","assets/images-storage/raspredelyaushaya_shlyapa/shlyapa2.jpg"]},{id:8,category:"Спорт",categoryEng:"sport",subcategory:"Предметы интерьера",subcategoryEng:"interior-items",title:"Кубок огня",description:"Волшебный артефакт, обладающий особой магической силой. Назначение этого предмета — избирать из претендентов наилучшего представителя школы для участия в Турнире Трёх Волшебников.",price:28,discount:5,stock:10,raiting:4.95,images:["assets/images-storage/kubok_ognya/kubok1.jpg","assets/images-storage/kubok_ognya/kubok2.png"]},{id:9,category:"Одежда и аксессуары",categoryEng:"clothes-accessories",subcategory:"Аксессуары",subcategoryEng:"accessories",title:"Крестраж 'Медальон Слизерина'",description:"Древняя реликвия, принадлежащая Салазару Слизерину, наделяет хозяина магнетическим обаянием и умением распознавать психологию других людей. Раскрывается. Внутри можно хранить фотографию или собственный талисман.",price:10,discount:5,stock:16,raiting:4.8,images:["assets/images-storage/medalion_Slizerina/sliz1.jpg","assets/images-storage/medalion_Slizerina/sliz2.jpg"]},{id:10,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Волшебные палочки",subcategoryEng:"magic-wands",title:"Палочка Волан-де-Морта",description:"Палочка сделана из бузины, с сердцевиной из волоса хвоста фестрала. Родная сестра тисовой палочки Гарри Поттера.",price:19,discount:5,stock:18,raiting:4.76,images:["assets/images-storage/palochka_Volan-de-Morta/palochka1.jpg","assets/images-storage/palochka_Volan-de-Morta/palochka2.png"]},{id:11,category:"Зелья",categoryEng:"potions",subcategory:"Добрые зелья",subcategoryEng:"good-potions",title:"Сыворотка правды",description:"Жидкость без цвета и запаха, заставляющая выпившего отвечать правдиво на все заданные вопросы. Очевидно, выпивший не может даже просто о чём-то умолчать. Но опытные маги могут избежать ее воздействия с помощью антидотов и заклинаний.",price:23,discount:15,stock:9,raiting:5,images:["assets/images-storage/syvorotka_pravdi/syvorotka1.jpg","assets/images-storage/syvorotka_pravdi/syvorotka2.png"]},{id:12,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Предметы интерьера",subcategoryEng:"interior-items",title:"Зеркало Еиналеж",description:"Магическое зеркало. Главную волшебную особенность зеркала Еиналеж можно отследить, прочитав надпись на раме: зеркало не отражает внешний облик человека, а показывает его самые сокровенные желания. Многие волшебники считают, что счастливый человек в зеркале увидит только свое отражение, так как у него все есть, а значит, ему не о чем мечтать.",price:44,discount:10,stock:19,raiting:4.99,images:["assets/images-storage/zerkalo/zerkalo1.jpg","assets/images-storage/zerkalo/zerkalo2.jpg"]},{id:13,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Волшебные палочки",subcategoryEng:"magic-wands",title:"Бузинная палочка",description:"Самая могущественная волшебная палочка из всех, принадлежала: Драко Малфою, Гарри Поттеру, Альбусу Дамблдору, Геллерту Грин-де-Вальду",price:15,discount:3,stock:14,raiting:4.99,images:["assets/images-storage/buzinnaya_palochka/buz1.png","assets/images-storage/buzinnaya_palochka/buz2.png"]},{id:14,category:"Спорт",categoryEng:"sport",subcategory:"Предметы интерьера",subcategoryEng:"interior-items",title:"Волшебные шахматы",description:"Отличаются от обычных магловских тем, что фигурки в них живые. Они не только сами ходят на указанные клетки, не только бьют друг друга в прямом смысле этого слова, но и нередко дают играющему советы.",price:67,discount:15,stock:8,raiting:4.98,images:["assets/images-storage/volshebnuie_shahmati/shah1.jpg","assets/images-storage/volshebnuie_shahmati/shah2.png"]},{id:15,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Камни",subcategoryEng:"stones",title:"Воскрешающий камень",description:"Легендарный артефакт, который сама Смерть подарила Кадму Певереллу в ответ на его просьбу дать ему средство, способное вернуть жертвы Смерти в мир живых.",price:16,discount:0,stock:11,raiting:4.91,images:["assets/images-storage/voskreshaiushii_kamen/voskr1.png","assets/images-storage/voskreshaiushii_kamen/voskr2.jpg"]},{id:16,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Книжные товары",subcategoryEng:"books",title:"Дневник Тома Реддла",description:"Изначально обычный ежедневник на 1943 год, купленный Томом Реддлом в магловском магазине канцтоваров на Воксхолл-Роуд в Лондоне.",price:17,discount:3,stock:18,raiting:3.95,images:["assets/images-storage/dnevnik_Redla/dnevnik1.jpg","assets/images-storage/dnevnik_Redla/dnevnik2.jpg"]},{id:17,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Предметы интерьера",subcategoryEng:"interior-items",title:"Семейные часы Уизли",description:"Большие часы семьи Уизли, на которых вместо времени указывается местонахождение каждого члена семьи. Вместо цифр на циферблате расположены указатели «дом», «больница», «работа», «в пути», «школа»...",price:40,discount:0,stock:4,raiting:4.73,images:["assets/images-storage/chasi_Uizly/clock1.jpg","assets/images-storage/chasi_Uizly/clock2.jpg"]},{id:18,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Аксессуары",subcategoryEng:"accessories",title:"Делюминатор",description:"Изобретённый Альбусом Дамлбдором предмет, уникальный в своем роде. Используется для того, чтобы «вытянуть» свет из помещения или из уличных фонарей.",price:11,discount:3,stock:12,raiting:4.18,images:["assets/images-storage/deluminator/delum1.png","assets/images-storage/deluminator/delum2.png"]},{id:19,category:"Спорт",categoryEng:"sport",subcategory:"Летающие предметы",subcategoryEng:"flying-objects",title:"Нимбус 2000",description:"Метла компании Скоростные мётлы Нимбус. Выпущена в августе 1991 года, и в то время была самой скоростной метлой в производстве.",price:100,discount:10,stock:4,raiting:4.25,images:["assets/images-storage/nimbus2000/nimb1.png","assets/images-storage/nimbus2000/nimb2.png"]},{id:20,category:"Транспорт",categoryEng:"transport",subcategory:"Летающие предметы",subcategoryEng:"flying-objects",title:"Летающий автомобиль",description:"Летающая машина, которая принадлежала Артуру Уизли.",price:110,discount:5,stock:3,raiting:4.95,images:["assets/images-storage/automobile/auto1.jpg","assets/images-storage/automobile/auto2.png"]},{id:21,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Книжные товары",subcategoryEng:"books",title:"Карта мародера",description:"Особая карта, показывающая весь замок Хогвартс и его ближайшие окрестности, а также местоположение любого человека в Хогвартсе, где бы тот ни находился, даже если он прячется под мантией-невидимкой.",price:14,discount:0,stock:17,raiting:4.05,images:["assets/images-storage/carta_maradera/carta1.jpg","assets/images-storage/carta_maradera/carta2.jpg"]},{id:22,category:"Зелья",categoryEng:"potions",subcategory:"Добрые зелья",subcategoryEng:"good-potions",title:"Амортеция",description:"Очень мощное приворотное зелье. Однако, по словам профессора Слизнорта, создать любовь невозможно, так что Амортенция создаёт лишь безумное, непреодолимое влечение к тому, кто сварил зелье.",price:25,discount:15,stock:5,raiting:2.95,images:["assets/images-storage/amortecia/amor1.jpg","assets/images-storage/amortecia/amor2.jpg"]},{id:23,category:"Магические существа",categoryEng:"magical-animals",subcategory:"Отрицательные существа",subcategoryEng:"negative-animals",title:"Чупакабра",description:"Волшебное существо, наполовину ящерица, наполовину человекоподобное животное, обитающее в обеих Америках. Питается кровью.",price:100,discount:5,stock:10,raiting:4.98,images:["assets/images-storage/chupakabra/chup1.png","assets/images-storage/chupakabra/chup2.jpg"]},{id:24,category:"Магические существа",categoryEng:"magical-animals",subcategory:"Отрицательные существа",subcategoryEng:"negative-animals",title:"Дементор",description:"Слепые существа, которые питаются человеческими, преимущественно светлыми, эмоциями.",price:50,discount:0,stock:10,raiting:3.77,images:["assets/images-storage/dementor/demen1.jpg","assets/images-storage/dementor/demen2.jpg"]},{id:25,category:"Магические существа",categoryEng:"magical-animals",subcategory:"Положительные существа",subcategoryEng:"positive-animals",title:"Добби",description:"Домашний эльф, служивший семье Малфоев. Его хозяева были Тёмными магами и жестоко с ним обращались.",price:30,discount:3,stock:67,raiting:4.99,images:["assets/images-storage/dobbi/dob1.jpg","assets/images-storage/dobbi/dob2.jpg"]},{id:26,category:"Зелья",categoryEng:"potions",subcategory:"Добрые зелья",subcategoryEng:"good-potions",title:"Эликсир из мандрагоры",description:"Зелье, которое, по всей видимости, включает в свой состав растение мандрагору.",price:23,discount:5,stock:16,raiting:4.95,images:["assets/images-storage/eliksir_is_mandragori/mandr1.jpg","assets/images-storage/eliksir_is_mandragori/mandr2.jpg"]},{id:27,category:"Зелья",categoryEng:"potions",subcategory:"Добрые зелья",subcategoryEng:"good-potions",title:"Эликсир жизни",description:"Зелье, для приготовления которого нужен уникальный артефакт — философский камень. Камень создал Николас Фламель; он и является единственным, кто сумел сварить этот эликсир. Зелье гарантирует бессмертие.",price:21,discount:0,stock:7,raiting:4.75,images:["assets/images-storage/eliksir_sgizni/sgizn1.jpg","assets/images-storage/eliksir_sgizni/sgizn2.jpg"]},{id:28,category:"Транспорт",categoryEng:"transport",subcategory:"Летающие предметы",subcategoryEng:"flying-objects",title:"Хогвартс-экспресс",description:"Специальный поезд, влекомый алым паровозом, предназначенный для доставки студентов Хогвартса к месту учёбы и обратно. Иногда «Хогвартс-экспресс» доставляет к месту работы новых преподавателей.",price:129,discount:5,stock:5,raiting:4.74,images:["assets/images-storage/express/exp1.webp","assets/images-storage/express/exp2.jpg"]},{id:29,category:"Магические существа",categoryEng:"magical-animals",subcategory:"Положительные существа",subcategoryEng:"positive-animals",title:"Феникс",description:"Великолепная алая птица величиной с лебедя, с длинным золотым хвостом, золотыми когтями и клювом. Гнездится на горных скалах, обитает в Египте, Индии и Китае. Феникс живет невероятно долго, поскольку способен регенерировать.",price:100,discount:0,stock:5,raiting:4.05,images:["assets/images-storage/fenix/fenix1.jpg","assets/images-storage/fenix/fenix2.jpg"]},{id:30,category:"Зелья",categoryEng:"potions",subcategory:"Добрые зелья",subcategoryEng:"good-potions",title:"Гербицид",description:"Зелье, которое способно уничтожать или повреждать растения. Имеет отвратительный вкус, непригодно для употребления человеком, так как может ухудшить его здоровье.",price:22,discount:3,stock:9,raiting:4.36,images:["assets/images-storage/gerbicid/gerb1.jpg","assets/images-storage/gerbicid/gerb2.jpg"]},{id:31,category:"Зелья",categoryEng:"potions",subcategory:"Добрые зелья",subcategoryEng:"good-potions",title:"Костерост",description:"Зелье-лекарство, заставляющее расти заново исчезнувшие кости, либо просто ускоряющее рост костей. Возможно, используется для сращивания переломов. Очень неприятно на вкус.",price:20,discount:3,stock:10,raiting:4.95,images:["assets/images-storage/kosterost/kost1.jpg","assets/images-storage/kosterost/kost1.jpg"]},{id:32,category:"Магические существа",categoryEng:"magical-animals",subcategory:"Отрицательные существа",subcategoryEng:"negative-animals",title:"Мантикора",description:"Очень опасное животное с головой человека, телом льва и хвостом скорпиона, обитающее в Греции. Своей свирепостью мантикора не уступает химере и так же редко встречается. Говорят, пожирая свою жертву, она тихо и сладко поет.",price:104,discount:5,stock:5,raiting:4.99,images:["assets/images-storage/manticora/mantic1.jpg","assets/images-storage/manticora/mantic2.jpg"]},{id:33,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Волшебные палочки",subcategoryEng:"magic-wands",title:"Палочка Уизли",description:"Она досталась ему «по наследству» от брата Чарли. Мальчику надо было идти в Хогвартс, а денег у родителей, видимо, было в обрез. Вот и экономили на чём только можно.",price:16,discount:0,stock:11,raiting:3.99,images:["assets/images-storage/palochka_Wuizli/wuizli1.jpg","assets/images-storage/palochka_Wuizli/wuizli2.jpg"]},{id:34,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Волшебные палочки",subcategoryEng:"magic-wands",title:"Палочка Малфоя",description:"Сделана из боярышника, с волосом единорога внутри и имеет в длину ровно 10 дюймов. Она была куплена в магазине Олливандера 31 июля 1991 года",price:11,discount:10,stock:13,raiting:4.97,images:["assets/images-storage/palocka_Draco-Malfoya/malfoi1.jpg","assets/images-storage/palocka_Draco-Malfoya/malfoi2.jpg"]},{id:35,category:"Магические существа",categoryEng:"magical-animals",subcategory:"Положительные существа",subcategoryEng:"positive-animals",title:"Карликовый пушистик",description:"Этот безобидный зверек встречается по всему миру. Туловище его шарообразной формы и покрыто мягким, пушистым мехом кремового цвета. Пушистик неприхотлив, не возражает, если его гладят или подбрасывают; когда особенно доволен, тихонько урчит.",price:98,discount:5,stock:5,raiting:4.98,images:["assets/images-storage/pushistik/push1.jpg","assets/images-storage/pushistik/push2.jpg"]},{id:36,category:"Магические существа",categoryEng:"magical-animals",subcategory:"Положительные существа",subcategoryEng:"positive-animals",title:"Саламандра",description:"Небольшая ящерица, живёт в огне и им питается. Шкура саламандры имеет ослепительно-белый цвет, однако может казаться синей или алой в зависимости от температуры пламени, в котором она рождается.",price:105,discount:3,stock:10,raiting:4.95,images:["assets/images-storage/salamandra/sal1.png","assets/images-storage/salamandra/sal2.jpg"]},{id:37,category:"Магические предметы",categoryEng:"magic-items",subcategory:"Предметы интерьера",subcategoryEng:"interior-items",title:"Исчезательный шкаф",description:"Исчезательные шкафы всегда делались парами: два шкафа, связанные между собой стояли в двух местах (например, в двух разных домах) и служили своеобразным «чёрным ходом», путём эвакуации. Почувствовав опасность, человек входил в один шкаф и моментально попадал в другой, таким образом отрываясь от преследования. При этом, выйдя из шкафа, человек попадал в другое место.",price:70,discount:10,stock:8,raiting:4.99,images:["assets/images-storage/shkaf/shkaf1.jpg","assets/images-storage/shkaf/shkaf2.jpg"]},{id:38,category:"Зелья",categoryEng:"potions",subcategory:"Добрые зелья",subcategoryEng:"good-potions",title:"Уидосорос",description:"Яд. В 1991 году Северус Снегг оставил один флакон с ядом в загадке с зельями — одном из препятствий на пути к философскому камню.",price:23,discount:3,stock:10,raiting:2.95,images:["assets/images-storage/uidosoros/uido1.jpg","assets/images-storage/uidosoros/uido2.jpg"]},{id:39,category:"Зелья",categoryEng:"potions",subcategory:"Добрые зелья",subcategoryEng:"good-potions",title:"Уменьшающее зелье",description:"Эффект уменьшения заключается не только в реальном уменьшении физических размеров живых организмов, но и в их существенном омоложении.",price:20,discount:3,stock:4,raiting:1.95,images:["assets/images-storage/umenishaiushee_zelie/umen1.jpg","assets/images-storage/umenishaiushee_zelie/umen2.jpg"]}];function m(e,r,s,c,n,i){for(let g=0;g<s.length;g++){const d=a(s[g],n,c[g]),m=o(i,"checkbox");m.id=c[g],d.classList.add("filter-label"),m.classList.add("filter-input");const S=o("amount-input-total","number","","");switch(S.readOnly=!0,s){case l:S.value=String(p.filter((t=>t.category===s[g])).length);break;case u:S.value=String(p.filter((t=>t.subcategory===s[g])).length)}const b=t("div","amount-block"),v=t("span","slash");v.textContent="/",b.append(y(s,e,c,g),v,S),d.append(b),d.prepend(m),r.append(d)}return r}const y=(t,e,a,r)=>{const s=o("amount-input-current","number","","");switch(s.readOnly=!0,s.id=a[r],t){case l:s.value=String(e.filter((e=>e.category===t[r])).length);break;case u:s.value=String(e.filter((e=>e.subcategory===t[r])).length)}return s};function S(o){const a=t("li","products__item"),r=t("div","image-container"),s=c(p[o].images[0],p[o].title,"products-image");s.id=String(p[o].id),"large"===localStorage.getItem("view")&&a.classList.add("another-view");const n=i(p[o].title,"products-title"),l=t("div","products-available"),g=i(p[o].price,"products-price"),u=i(`-${p[o].discount}%`,"products__discount");p[o].discount||(u.style.display="none");const d=b(o);d.id=`${s.id}`,d.classList.add("button-first");const m=e("детали","btn__details");m.classList.add("button-first"),m.id=`${s.id}`;const y=t("div","product-buttons-container"),S=t("a","card-link");return S.append(m),r.append(s),l.append(g),y.append(d,S),a.append(u,r,n,l,y),a}const b=t=>localStorage.getItem(`btn_${t}`)?e(`${localStorage.getItem(`btn_${t}`)}`,"btn__add"):e("в корзину","btn__add"),v=()=>{const t=[...document.querySelectorAll(".products__item")];"large"===localStorage.getItem("view")?t.forEach((t=>t.classList.add("another-view"))):t.forEach((t=>t.classList.remove("another-view")))},h=(t,e)=>{for(let o=0;o<e.length;o++)if(t.some((t=>t.id===e[o].id))){const a=t.findIndex((t=>t.id===e[o].id));t.splice(a,1)}else t.push(e[o]);return t},f=t=>t.map((t=>t.price)).reduce(((t,e)=>Math.max(t,e))),k=t=>t.map((t=>t.stock)).reduce(((t,e)=>Math.max(t,e))),I=c("./assets/icons/arrow-down.svg","sort-arrow","sort-arrow"),E=t("ul","sort__list"),_=t("li","sort__item"),q=t("li","sort__item"),L=t("li","sort__item"),$=t("li","sort__item"),x=t("div","view-btns"),w=e("-","btn-start-view"),C=e("+","btn-another-view");"large"===localStorage.getItem("view")?C.classList.add("active"):w.classList.add("active");const j=t("div","popup-wrapper"),P=t("div","popup"),A=t("div","popup-content");A.innerHTML="ТОВАР НЕ НАЙДЕН";const O=t("div","products"),N=t("span","found-items");function M(e){const a=z(e);return O.append(function(e){const a=t("div","products__header");E.textContent="Сортировка по:",_.textContent="Сортировать от A до Я",q.textContent="Сортировать от Я до А",L.textContent="Сортировать по цене 🠕",$.textContent="Сортировать по цене 🠗";const r=i("Найдено товаров: ","sort__text"),s=o("sort__input","search","Найти товар","");return r.append(N),E.append(_,q,L,$,I),x.append(w,C),a.append(E,r,s,x),a}(),a,(P.append(A),j.appendChild(P),j)),O}function z(e){const o=t("ul","products__list");return E.addEventListener("click",(t=>{if(t.target instanceof Element&&t.target.classList.contains("sort__item")){const r=document.querySelectorAll(".sort__item");let s=[];switch(t.target){case r[0]:a=e,s=[...a].sort(((t,e)=>t.title.toLowerCase()<e.title.toLowerCase()?-1:1));break;case r[1]:s=(t=>[...t].sort(((t,e)=>t.title.toLowerCase()>e.title.toLowerCase()?-1:1)))(e);break;case r[2]:s=(t=>[...t].sort(((t,e)=>t.price-e.price)))(e);break;case r[3]:s=(t=>[...t].sort(((t,e)=>e.price-t.price)))(e)}o.innerHTML="",s.forEach((t=>{o.append(S(t.id)),v()}))}var a})),j.classList.contains("popup-open")?N.innerHTML="0":N.innerHTML=e.length.toString(),e.forEach((t=>{o.append(S(t.id))})),o}function J(){j.classList.remove("popup-open"),A.classList.remove("popup-open")}I.addEventListener("click",(()=>{E.classList.contains("open")?(E.classList.remove("open"),E.querySelectorAll(".sort__item").forEach((t=>t.classList.remove("open"))),I.classList.remove("open")):(E.classList.add("open"),E.querySelectorAll(".sort__item").forEach((t=>t.classList.add("open"))),I.classList.add("open"))})),x.addEventListener("click",(t=>{const e=[...document.querySelectorAll(".products__item")],o=document.querySelector(".btn-start-view"),a=document.querySelector(".btn-another-view");t.target instanceof HTMLButtonElement&&(t.target.classList.contains("btn-another-view")?(a.classList.add("active"),o.classList.remove("active"),e.forEach((t=>t.classList.add("another-view"))),localStorage.setItem("view","large")):(a.classList.remove("active"),o.classList.add("active"),e.forEach((t=>t.classList.remove("another-view"))),localStorage.setItem("view","small")))}));const T=`${f(p)}`,H=`${k(p)}`;function R(e,a,r,s,c){const n=o(`from-slider-${e}`,"range","",a,"0",c),i=o(`to-slider-${e}`,"range","",r,"0",c);n.id=`min-${e}`,i.id=`max-${e}`,n.classList.add(`slider-${e}`),i.classList.add(`slider-${e}`),i.value=r;const l=o(`form_control_container__time__input_min-${e}`,"number","",a,"0",c,!0),g=o(`form_control_container__time__input_max-${e}`,"number","",r,"0",c,!0);l.id=`min-input-${e}`,g.id=`max-input-${e}`,l.classList.add(`input-${e}`),g.classList.add(`input-${e}`);const u=t("div",`filter__${e}`),d=t("div",`slider-control-${e}`),p=t("h3",`filter-${e}-title`);p.textContent=s;const m=t("div",`form-control-${e}`),y=t("div",`form-control-container-${e}`),S=t("div",`form-control-container__time-${e}`),b=t("div",`form-control-container-${e}`),v=t("div",`form-control-container__time-${e}`),h=t("div",`range-container-${e}`);function f(t,e){return[parseInt(`${t.value}`,10),parseInt(`${e.value}`,10)]}function k(t,e,o,a,r){const s=+e.max-+e.min,c=+t.value-+e.min,n=+e.value-+e.min;r.style.background=`linear-gradient(\n      to right,\n      ${o} 0%,\n      ${o} ${c/s*100}%,\n      ${a} ${c/s*100}%,\n      ${a} ${n/s*100}%, \n      ${o} ${n/s*100}%, \n      ${o} 100%)`}function I(t){Number(t.value)<=0?i.setAttribute("zIndex","2"):i.setAttribute("zIndex","0")}return y.append(S,l),b.append(v,g),m.append(y,b),d.append(n,i),h.append(d,m),u.append(p,h),k(n,i,"#C6C6C6","#ffc500",i),I(i),n.oninput=()=>function(t,e,o){const[a,r]=f(t,e);k(t,e,"#C6C6C6","#ffc500",e),a>r?(t.value=r,o.value=r):o.value=a}(n,i,l),i.oninput=()=>function(t,e,o){const[a,r]=f(t,e);k(t,e,"#C6C6C6","#ffc500",e),I(e),a<=r?(e.value=r,o.value=r):(o.value=a,e.value=a)}(n,i,g),l.oninput=()=>function(t,e,o,a){const[r,s]=f(e,o);k(e,o,"#C6C6C6","#ffc500",a),r>s?(t.value=s,e.value=s):t.value=r}(n,l,g,i),g.oninput=()=>function(t,e,o,a){const[r,s]=f(e,o);k(e,o,"#C6C6C6","#ffc500",a),I(o),r<=s?(t.value=s,o.value=s):o.value=r}(i,l,g,i),u}const D=e("","btn-reset");D.classList.add("button-second");const V=o("input-reset","checkbox");function Z(o){const r=t("aside","main-aside"),s=t("div","btn-container"),c=e("скопировать ссылку","btn-copy");c.classList.add("button-second");const n=a("сбросить фильтры","label-reset","reset");return V.id="reset",V.classList.add("filter-input"),n.append(V),D.prepend(n),s.append(D,c),r.append(s,function(e){const o=t("div","filters");return o.append(function(e){const o=t("div","filter__category"),a=t("h3","filter-category-title"),r=t("form","form__category");return a.textContent="Категории",o.append(a,m(e,r,l,g,"category-label","category-input")),o.addEventListener("change",(t=>{const e=t.target,o=e.parentElement;e instanceof Element&&e.closest("input")&&(e.checked?o.classList.add("checked"):o.classList.remove("checked"))})),o}(e),function(e){const o=t("div","filter__subcategory"),a=t("h3","filter-subcategory-title"),r=t("form","form__category");return a.textContent="Подкатегории",o.append(a,m(e,r,u,d,"subcategory-label","subcategory-input")),o.addEventListener("change",(t=>{const e=t.target,o=e.parentElement;e instanceof Element&&e.closest("input")&&(e.checked?o.classList.add("checked"):o.classList.remove("checked"))})),o}(e)),o}(o),function(e){const o=t("div","sliders"),a=`${r=e,r.map((t=>t.price)).reduce(((t,e)=>Math.min(t,e)))}`;var r;const s=`${f(e)}`,c=`${(t=>t.map((t=>t.stock)).reduce(((t,e)=>Math.min(t,e))))(e)}`,n=`${k(e)}`;return o.append(R("price",a,s,"Цена",T),R("amount",c,n,"Количество",H)),o}(o)),r}const U=t("div","products-wrapper");function Y(t){if(localStorage.getItem("currentProducts")){const e=JSON.parse(localStorage.getItem("currentProducts"));U.append(Z(t),M(e))}else U.append(Z(t),M(t));return U}const B=(e,o,a,r)=>{const s=t("div","box"),c=t("span","span");c.textContent=e;const n=t("div",a);if(n.textContent=o,s.append(c,n),"expiration"===a){const e=t("span","exp-month");e.textContent="мм";const o=t("span","exp-year");o.textContent="гг",n.append(e,o)}if(r){const e=t("img","card");e.src=r,s.append(e)}return s},G=(e,a,r)=>{const s=t("div","inputBox"),c=t("span","span");c.textContent=e;const n=o(a,"text");return n.classList.contains("card-number-input")&&(n.oninput=()=>{document.querySelector(".card-number-box").innerHTML=n.value}),n.classList.contains("card-holder-input")&&(n.oninput=()=>{document.querySelector(".card-holder-name").innerHTML=n.value}),n.classList.contains("cvv-input")&&(n.oninput=()=>{document.querySelector(".cvv-box").innerHTML=n.value},n.onmouseenter=()=>{document.querySelector(".front").style.transform="perspective(1000px) rotateY(-180deg)",document.querySelector(".back").style.transform="perspective(1000px) rotateY(0deg)"},n.onmouseleave=()=>{document.querySelector(".front").style.transform="perspective(1000px) rotateY(0deg)",document.querySelector(".back").style.transform="perspective(1000px) rotateY(180deg)"}),r&&(n.maxLength=r),((t,e)=>{switch(e){case"Номер карты":t.pattern="[0-9]{16}",t.addEventListener("keyup",(()=>(t=>{switch(t.value=t.value.replace(/[^\d]/g,""),t.value[0]){case"4":document.querySelectorAll(".card").forEach((t=>{t.setAttribute("src","assets/icons/visa.png")}));break;case"5":document.querySelectorAll(".card").forEach((t=>{t.setAttribute("src","assets/icons/master-card.png")}));break;case"6":document.querySelectorAll(".card").forEach((t=>{t.setAttribute("src","assets/icons/maestro.png")}));break;case"7":document.querySelectorAll(".card").forEach((t=>{t.setAttribute("src","assets/icons/slytherin.png")}));break;case"8":document.querySelectorAll(".card").forEach((t=>{t.setAttribute("src","assets/icons/griffindor.png")}));break;case"9":document.querySelectorAll(".card").forEach((t=>{t.setAttribute("src","assets/icons/hufflepuff.png")}));break;default:document.querySelectorAll(".card").forEach((t=>{t.setAttribute("src","assets/icons/default.png")}))}})(t))),t.placeholder="#### #### #### ####";break;case"Владелец карты":t.onkeypress=function(t){-1!="1234567890+./=-_".indexOf(t.key)&&t.preventDefault()},t.pattern="[A-Za-zА-Яа-яЁё]{3,}[ ]{1}[A-Za-zА-Яа-яЁё]{3,}",t.placeholder="Имя Фамилия";break;case"CVV":t.pattern="[0-9]{,3}",t.addEventListener("keyup",(function(){t.value=t.value.replace(/[^\d]/g,"")})),t.placeholder="###";break;case"Адрес доставки":t.pattern="[A-Za-zА-Яа-яЁё]{5,}[ ]{1}[A-Za-zА-Яа-яЁё]{5,}[ ]{1}[A-Za-zА-Яа-яЁё]{5,}[ ]{1}[A-Za-zА-Яа-яЁё]{5,}[ ]{1}[A-Za-zА-Яа-яЁё]{5,}",t.placeholder="страна область город микрорайон улица";break;case"Номер телефона":t.pattern="[+]{1}[0-9]{11,}",t.oninput=function(){t.value=t.value.replace(/[^0-9,+]/g,"")},t.placeholder="+# ### ### ## ##";break;case"Email":t.type="email",t.placeholder="электронная почта"}})(n,e),s.append(c,n),s},W=(e,o,a,r)=>{const s=t("div","inputBox"),c=t("span","span");c.textContent=e;const n=t("select",o);n.classList.contains("month-input")&&(n.oninput=()=>{document.querySelector(".exp-month").innerHTML=n.value}),n.classList.contains("year-input")&&(n.oninput=()=>{document.querySelector(".exp-year").innerHTML=n.value});const i=t("option","option-first");i.disabled=!0,i.textContent=e,n.append(i);for(let e=a;e<r;e++){const o=t("option",`option_${e}`);o.value=`${e}`,o.textContent=`${e}`,n.append(o)}return n.value=" ",s.append(c,n),s},F=G("Номер карты","card-number-input",16),K=G("Владелец карты","card-holder-input"),Q=G("Адрес доставки","card-address-input"),X=G("Номер телефона","card-tel-input"),tt=G("Email","card-email-input"),et=G("CVV","cvv-input",3),ot=W("Месяц","month-input",1,13),at=W("Год","year-input",2023,2035),rt=()=>{const e=t("div","passed-block"),o=t("p","passed-text"),a=t("input","passed-time");return o.textContent="Введенные данные успешно приняты, окно закроется через  ",a.type="number",a.value="5",setInterval((()=>{a.value=String(+a.value-1)}),1e3),o.append(a),e.append(o),e},st=document.querySelector(".main"),ct=()=>{const o=t("form","form");o.addEventListener("submit",(function(t){t.preventDefault(),1==it(this)?(console.log("Форма заполнена успешно!"),st.innerHTML="",st.append(rt()),setTimeout((()=>(st.innerHTML="",st.append(U))),5e3)):console.log("Поля не заполнены, либо заполнены неправильно!")}));const a=t("div","flexbox"),r=e("отправить","submit-btn");return r.type="submit",r.classList.add("button-first"),a.append(ot,at,et),o.append(F,K,Q,X,tt,a,r),o},nt=()=>{const e=t("div","form-wrapper"),o=t("div","container");return e.append(o),o.append((()=>{const e=t("div","card-container");return e.append((()=>{const e=t("div","front"),o=t("div","image"),a=t("img","chip");a.src="assets/icons/chip.png";const r=t("img","card");r.src="assets/icons/default.png",o.append(a,r);const s=t("div","card-number-box");s.textContent="################";const c=t("div","flexbox");return c.append(B("владелец карты","полное имя","card-holder-name"),B("срок карты","","expiration")),e.append(o,s,c),e})(),(()=>{const e=t("div","back"),o=t("div","stripe");return e.append(o,B("CVV","","cvv-box","assets/icons/default.png")),e})()),e})(),ct()),e};function it(t){function e(t){const e=t.parentNode;e.classList.contains("error")&&(e.querySelector(".error-label").remove(),e.classList.remove("error"))}function o(t,e){const o=t.parentNode,a=document.createElement("label");a.classList.add("error-label"),a.textContent=e,o.classList.add("error"),o.append(a)}function a(t,e){const o=t.parentNode,a=document.createElement("label");a.classList.add("error-label"),a.textContent=e,o.classList.add("error"),o.append(a)}let r=!0;const s=t.querySelectorAll("input"),c=t.querySelectorAll("select");for(const t of s)e(t),""==t.value&&(o(t,"error"),r=!1);for(const t of c)e(t),""==t.value&&(a(t,"error"),r=!1);return r}document.querySelector(".form")&&document.querySelector(".form").addEventListener("submit",(function(t){t.preventDefault(),1==it(this)?(alert("Форма заполнена успешно!"),st.innerHTML="",st.append(rt()),setTimeout((()=>{Y(p)}),3e3)):alert("Поля не заполнены, либо заполнены неправильно!")}));const lt=t("ul","cart-list"),gt=()=>{const e=t("div","cart-wrapper"),o=pt();return 0===JSON.parse(localStorage.getItem("cartList")).length?e.append(o):e.append(mt(),qt()),e};function ut(t,e){const o=[];for(let a=0;a<t.length;a+=e){const r=t.slice(a,a+e);o.push(r)}return o}const dt=t=>0===JSON.parse(localStorage.getItem("cartList")).length?ut(JSON.parse(localStorage.getItem("cartList")),t):ut(JSON.parse(localStorage.getItem("cartList")),t)[+localStorage.getItem("currentPage")-1],pt=()=>{const e=t("div","empty"),o=t("p","empty-text");return o.textContent="Корзина пуста...",e.append(o),e},mt=()=>{const e=t("div","cart-products"),o=t("div","block-header"),a=t("p","block-title");a.textContent="Товары в корзине";const r=t("div","block-section"),s=t("input","pagination");s.type="text",s.placeholder="кол-во товаров",s.maxLength=1,s.value=localStorage.getItem("size"),s.oninput=()=>{if(console.log(s.value),s.value&&"0"!==s.value){s.value=s.value.replace(/[^1-9.]/g,"").replace(/(\..*)\./g,"$1"),localStorage.setItem("currentPage","1"),localStorage.setItem("btnLeft","hide"),document.querySelector(".btn-switch-page-left").style.transform="scale(0)",document.querySelector(".current-page").value="1",document.querySelector(".cart-list").innerHTML="";const t=JSON.parse(localStorage.getItem("cartItems")).flat();localStorage.setItem("cartItems",JSON.stringify(ut(t.flat(),+s.value))),localStorage.setItem("size",s.value),dt(+localStorage.getItem("size")).forEach((t=>{yt(t)})),1===JSON.parse(localStorage.getItem("cartItems")).length&&(localStorage.setItem("btnRight","hide"),document.querySelector(".btn-switch-page-right").style.transform="scale(0)"),JSON.parse(localStorage.getItem("cartItems")).length>1&&(localStorage.setItem("btnRight","show"),document.querySelector(".btn-switch-page-right").style.transform="scale(1)")}},o.append(a,St(),s,bt());const c=dt(+localStorage.getItem("size"));return lt.innerHTML="",c.forEach((t=>{yt(t)})),r.append(lt),e.querySelectorAll(".number-product").forEach(((t,e)=>{t.textContent=`${e+1}`})),e.append(o,r),e},yt=t=>(lt.append(vt(t)),lt),St=()=>{const t=a("Товары: ","quantity"),e=o("quantity","number","",`${JSON.parse(localStorage.getItem("cartList")).length}`);return t.append(e),t};localStorage.getItem("currentPage")||localStorage.setItem("currentPage","1");const bt=()=>{const a=t("div","btns-container-switch-pages"),r=o("current-page","number","",`${localStorage.getItem("currentPage")}`),s=i("Страница: ","title-of-container-switch-btns"),c=e("","btn-switch-page-left"),n=e("","btn-switch-page-right");return"show"===localStorage.getItem("btnLeft")?c.style.transform="scale(1)":"hide"===localStorage.getItem("btnLeft")&&(c.style.transform="scale(0)"),"show"===localStorage.getItem("btnRight")?n.style.transform="scale(1)":"hide"===localStorage.getItem("btnRight")&&(n.style.transform="scale(0)"),a.append(s,c,r,n),a},vt=e=>{const o=t("li","cart-item");return o.id=`${e}`,o.append(ht(e),ft(e),kt(e),It(e)),o},ht=e=>{const o=t("p","number-product");return o.textContent=`${JSON.parse(localStorage.getItem("cartList")).indexOf(e)+1}`,o},ft=t=>c(p[t].images[0],p[t].title,"cart-item-image"),kt=e=>{const a=t("div","description-cart-item"),r=t("div","description-header"),s=i(p[e].title,"block-title"),c=t("div","description-content"),n=i(p[e].description,"mini-description-item"),l=t("div","raiting-discount-container"),g=i("Рейтинг: ","raiting"),u=i("Скидка: ","discount"),d=o("raiting-value","","",`${p[7].raiting}`);d.setAttribute("readonly","true");const m=o("discount-value","","",`${p[7].discount}%`);return m.setAttribute("readonly","true"),g.append(d),u.append(m),l.append(g,u),r.append(s),c.append(n,l),a.append(r,c),a},It=a=>{const r=t("div","values-cart-item"),s=i("Доступно: ","stock");localStorage.getItem(`stock_${a}`)||localStorage.setItem(`stock_${a}`,String(p[a].stock-1));const c=o("stock-value","number","",localStorage.getItem(`stock_${a}`),"","",!1,`${a}`);c.setAttribute("readonly","true");const n=t("span","stock-text");n.textContent="шт.",localStorage.getItem(`quantityProduct_${a}`)||localStorage.setItem(`quantityProduct_${a}`,"1");const l=o("quantity-items-cart","number","",String(+localStorage.getItem(`quantityProduct_${a}`)));l.setAttribute("readonly","true");const g=t("div","add-del-btns-container"),u=e("","add-item");u.id=`${a}`,"0"===localStorage.getItem(`stock_${a}`)&&(u.style.transform="scale(0)");const d=e("","delete-item");d.id=`${a}`;const m=t("div","container"),y=t("input","total-price");y.readOnly=!0,y.id=`${a}`,localStorage.getItem(`price_${a}`)?y.value=localStorage.getItem(`price_${a}`):(localStorage.setItem(`price_${a}`,`${p[a].price}`),y.value=`${p[a].price}`);const S=t("span","span");return S.textContent="$",m.append(y,S),s.append(c,n),g.append(d,l,u),r.append(s,g,m),r},Et=(e,o,a,r,s,c)=>{const n=t("div",o),i=t("p",a);i.textContent=`Промокод "${e}" - ${s}%`;const l=t("button",r);return l.textContent=c,l.type="button",n.append(i,l),n},_t=e=>{const o=t("span","new-price");return o.textContent=`${Math.floor(+document.querySelector(".total-sum-value").value*(1-e/100))}`,o},qt=()=>{const a=r("summary","Итого"),s=a.querySelector(".block-section"),c=i("Товары, шт: ","quantity-products");let n=JSON.parse(localStorage.getItem("cartList")).length;localStorage.getItem("totalStock")&&(n=+localStorage.getItem("totalStock"));const l=o("quantity-products-value","","",`${n}`,"","",!0),g=i("Сумма: ","total-sum");let u=JSON.parse(localStorage.getItem("cartItems")).flat().reduce(((t,e)=>t+e.price),0);localStorage.getItem("totalPrice")&&(u=+localStorage.getItem("totalPrice"));const d=o("total-sum-value","","",`${u}`,"","",!0),p=t("form","promocode-form"),m=t("div","end-sum"),y=t("input","promecode-input"),S=t("div","promocode-block");jt(y,S),Lt();const b=i("Попробуйте: 'Гарри', 'Поттер'","promo-test"),v=e("Купить сейчас","btn-buy-now");return v.type="button",v.classList.add("button-second"),v.addEventListener("click",(()=>{var t;null===(t=document.querySelector(".main"))||void 0===t||t.append(nt())})),p.append(m,y,S,b,v),s.append(c,l,g,d,p),a},Lt=()=>{document.addEventListener("click",(t=>{t.target instanceof Element&&t.target.closest(".promocode-block .prom-btn-garry")&&$t(),t.target instanceof Element&&t.target.closest(".promocode-block .prom-btn-potter")&&wt(),t.target instanceof Element&&t.target.closest(".end-sum .prom-btn-garry")&&xt(),t.target instanceof Element&&t.target.closest(".end-sum .prom-btn-potter")&&Ct()}))},$t=()=>{var t,e,o;document.querySelector(".end-sum").style.opacity="1",document.querySelector(".end-sum .prom-cont-garry")||(null===(t=document.querySelector(".end-sum"))||void 0===t||t.append(Et("Гарри","prom-cont-garry","prom-text-garry","prom-btn-garry",10,"удалить")),document.querySelector(".total-sum-value").style.textDecoration="line-through",document.querySelector(".new-price")?document.querySelector(".new-price").textContent=`${Math.floor(.75*+localStorage.getItem("totalPrice"))}`:null===(e=document.querySelector(".total-sum-value"))||void 0===e||e.after(_t(10))),document.querySelector(".promocode-block .prom-cont-potter")||(document.querySelector(".promocode-block").style.opacity="0"),null===(o=document.querySelector(".promocode-block .prom-cont-garry"))||void 0===o||o.remove()},xt=()=>{var t,e;null===(t=document.querySelector(".end-sum .prom-cont-garry"))||void 0===t||t.remove(),document.querySelector(".end-sum .prom-cont-potter")?document.querySelector(".new-price").textContent=`${Math.floor(+document.querySelector(".new-price").textContent/.9)}`:(document.querySelector(".end-sum").style.opacity="0",null===(e=document.querySelector(".new-price"))||void 0===e||e.remove(),document.querySelector(".total-sum-value").style.textDecoration="none")},wt=()=>{var t,e,o;document.querySelector(".end-sum").style.opacity="1",document.querySelector(".end-sum .prom-cont-potter")||(null===(t=document.querySelector(".end-sum"))||void 0===t||t.append(Et("Поттер","prom-cont-potter","prom-text-potter","prom-btn-potter",15,"удалить")),document.querySelector(".total-sum-value").style.textDecoration="line-through",document.querySelector(".new-price")?document.querySelector(".new-price").textContent=`${Math.floor(.75*+localStorage.getItem("totalPrice"))}`:null===(e=document.querySelector(".total-sum-value"))||void 0===e||e.after(_t(15))),document.querySelector(".promocode-block .prom-cont-garry")||(document.querySelector(".promocode-block").style.opacity="0"),null===(o=document.querySelector(".promocode-block .prom-cont-potter"))||void 0===o||o.remove()},Ct=()=>{var t,e;null===(t=document.querySelector(".end-sum .prom-cont-potter"))||void 0===t||t.remove(),document.querySelector(".end-sum .prom-cont-garry")?document.querySelector(".new-price").textContent=`${Math.floor(+document.querySelector(".new-price").textContent/.85)}`:(document.querySelector(".end-sum").style.opacity="0",null===(e=document.querySelector(".new-price"))||void 0===e||e.remove(),document.querySelector(".total-sum-value").style.textDecoration="none")},jt=(t,e)=>{t.oninput=()=>{"Гарри"===t.value?document.querySelector(".prom-cont-garry")||(e.style.opacity="1",e.append(Et("Гарри","prom-cont-garry","prom-text-garry","prom-btn-garry",10,"добавить"))):"Поттер"===t.value?(document.querySelector(".prom-cont-potter")||(e.style.opacity="1",e.append(Et("Поттер","prom-cont-potter","prom-text-potter","prom-btn-potter",15,"добавить"))),localStorage.setItem("totalPriceProm",String(Math.floor(.9*+localStorage.getItem("totalPrice")))),document.querySelector(".span-price-promocode").textContent=localStorage.getItem("totalPriceProm"),document.querySelector(".total-quantity-header").textContent=localStorage.getItem("totalPriceProm"),document.querySelector(".total-sum-value").style.textDecoration="line-through"):(localStorage.setItem("totalPriceProm",localStorage.getItem("totalPrice")),document.querySelector(".span-price-promocode").textContent="",document.querySelector(".total-quantity-header").textContent=localStorage.getItem("totalPrice"),document.querySelector(".total-sum-value").style.textDecoration="none",e.style.opacity="0")}},Pt=()=>{const t=document.querySelector(".end-sum .prom-cont-garry"),e=document.querySelector(".end-sum .prom-cont-potter");t&&!e?document.querySelector(".new-price").textContent=`${Math.floor(.9*+localStorage.getItem("totalPrice"))}`:!t&&e?document.querySelector(".new-price").textContent=`${Math.floor(.85*+localStorage.getItem("totalPrice"))}`:t&&e&&(document.querySelector(".new-price").textContent=`${Math.floor(.75*+localStorage.getItem("totalPrice"))}`)},At=t=>{var e,o;(null===(e=t.parentElement)||void 0===e?void 0:e.querySelector("input")).value=String(+(null===(o=t.parentElement)||void 0===o?void 0:o.querySelector("input")).value+1)},Ot=t=>{var e,o;(null===(e=t.parentElement)||void 0===e?void 0:e.querySelector("input")).value=String(+(null===(o=t.parentElement)||void 0===o?void 0:o.querySelector("input")).value-1)},Nt=t=>{var e;localStorage.setItem(`quantityProduct_${t.id}`,(null===(e=t.parentElement)||void 0===e?void 0:e.querySelector("input")).value)},Mt=()=>{document.querySelector(".total-quantity-header").textContent=localStorage.getItem("totalPrice")},zt=()=>{document.querySelector(".found-products").textContent=localStorage.getItem("totalStock")},Jt=document.querySelector(".main");function Tt(o){const a=t("div","details-page");return a.append((o=>{const a=t("div","nav-list"),r=t("a","nav-list-btn");r.classList.add("button"),r.href=new URL(window.location.pathname,window.location.origin).href,r.textContent="Все товары";const s=e(p[o].category,"nav-list-btn"),c=e(p[o].subcategory,"nav-list-btn"),n=e(p[o].title,"nav-list-btn");return n.classList.add("active"),a.append(r,s,c,n),a})(o),function(o){const a=r("details-block",p[o].title,"details-header","details-section"),n=a.querySelector(".details-section");return null==n||n.append((e=>{const o=t("div","mini-photos-section"),a=t("div","mini-photo-item"),r=t("div","mini-photo-item"),s=c(p[e].images[0],p[e].title,"mini-photo-img","first-mini-img"),n=c(p[e].images[1],p[e].title,"mini-photo-img","second-mini-img");return a.append(s),r.append(n),o.append(a,r),o})(o),(e=>{const o=t("div","active-photo-section"),a=t("div","active-photo-item"),r=c(p[e].images[0],p[e].title,"active-photo-img",`${e}`);return a.append(r),o.append(a),o})(o),(e=>{const o=t("div","product-info-section"),a=s("product-descrip-block","descrip-text",p[e].description,"product-descrip-header","Описание","product-descrip-section"),r=t("div","product-categories-section"),c=s("product-category","category-text",p[e].category,"category-header","Категория","category-section"),n=s("product-subcategory","subcategory-text",p[e].subcategory,"subcategory-header","Подкатегория","subcategory-section");r.append(c,n);const i=t("div","product-add-info-section"),l=s("product-stock","stock-text",p[e].stock,"stock-header","В наличии","stock-section"),g=s("product-discount","discount-text",p[e].discount,"discount-header","Скидка","discount-section");return i.append(l,g),o.append(a,r,i),o})(o),(o=>{const a=t("div","sail-details-section"),r=t("div","price-block");r.innerText=`${p[o].price}$`;let s="";s=localStorage.getItem(`btn_${o}`)?`${localStorage.getItem(`btn_${o}`)}`:"в корзину";const c=e(s,"btn__add");c.id=`${o}`,c.classList.add("button-second");const n=e("быстрая покупка","btn-buy-now");return n.id=`${o}`,n.classList.add("button-second"),n.addEventListener("click",(()=>{"добавлен"===localStorage.getItem(`btn_${o}`)?(Jt.innerHTML="",Jt.append(gt(),nt())):((t=>{const e=JSON.parse(localStorage.getItem("cartList")),o=JSON.parse(localStorage.getItem("cartItems"));e.includes(t)||e.push(t),o.includes(p[t])||o.push(p[t]),localStorage.setItem("cartList",JSON.stringify(e)),localStorage.setItem("cartItems",JSON.stringify(o)),localStorage.setItem("totalStock",String(+localStorage.getItem("totalStock")+1)),document.querySelector(".found-products").textContent=localStorage.getItem("totalStock"),localStorage.setItem("totalPrice",String(+localStorage.getItem("totalPrice")+p[t].price)),document.querySelector(".total-quantity-header").textContent=localStorage.getItem("totalPrice"),localStorage.setItem(`btn_${t}`,"добавлен"),document.querySelectorAll(".btn__add").forEach((e=>{+e.id===t&&(e.textContent="добавлен")})),localStorage.setItem(`stock_${t}`,""+(p[t].stock-1))})(o),Jt.innerHTML="",Jt.append(gt(),nt()))})),a.append(r,c,n),a})(o)),a}(o)),a}document.addEventListener("click",(t=>{if(t.target instanceof Element&&t.target.closest(".mini-photo-img")){const e=t.target,o=document.querySelector(".active-photo-img");"first-mini-img"===e.id?o.src=p[+o.id].images[0]:"second-mini-img"===e.id&&(o.src=p[+o.id].images[1])}}));const Ht=()=>{const t=document.querySelector(".products__list"),e=document.querySelector(".found-items");t.style.display="none",j.classList.add("popup-open"),A.classList.add("popup-open"),e.innerHTML="0"},Rt=t=>{const e=document.querySelector("#min-price"),o=document.querySelector("#max-price"),a=document.querySelector("#min-input-price"),r=document.querySelector("#max-input-price"),s=t.reduce(((t,e)=>(t.push(e.price),t)),[]);e.value=Math.min(...s).toString(),o.value=Math.max(...s).toString(),a.value=e.value,r.value=o.value},Dt=t=>{const e=document.querySelector("#min-amount"),o=document.querySelector("#max-amount"),a=document.querySelector("#min-input-amount"),r=document.querySelector("#max-input-amount"),s=t.reduce(((t,e)=>(t.push(e.stock),t)),[]);e.value=Math.min(...s).toString(),o.value=Math.max(...s).toString(),a.value=e.value,r.value=o.value},Vt=()=>t("div","error-block"),Zt=document.querySelector(".main");!function(){const e=document.querySelector(".header"),o=c("assets/img/logo.gif","logo","logo"),a=t("a","logo-link");a.append(o),a.href=new URL(window.location.pathname,window.location.origin).href;const r=i("Общая сумма: ","quantity"),s=t("span","total-quantity-header");s.textContent=localStorage.getItem("totalPrice"),r.append(s);const n=t("a","cart-link");n.href="#/cart";const l=t("div","basket-container"),g=c("assets/icons/basket.png","basket","basket"),u=t("span","found-products");localStorage.getItem("totalStock")?u.textContent=localStorage.getItem("totalStock"):u.textContent="0",l.append(g,u),n.append(l),e.append(a,r,n)}(),function(){const e=document.querySelector(".footer"),o=n("https://rs.school/js/","rs-logo"),a=t("p","year");a.textContent="2023";const r=n("https://github.com/anneli-sf","anneli-github-logo"),s=n("https://github.com/MaestroFront","alex-github-logo");o.setAttribute("target","_blank"),r.setAttribute("target","_blank"),s.setAttribute("target","_blank"),e.append(r,o,a,s)}(),localStorage.getItem("cartList")||localStorage.setItem("cartList",JSON.stringify([])),localStorage.getItem("cartItems")||localStorage.setItem("cartItems",JSON.stringify([])),localStorage.getItem("totalStock")||localStorage.setItem("totalStock","0"),localStorage.getItem("totalPrice")||localStorage.setItem("totalPrice","0"),0===JSON.parse(localStorage.getItem("cartList")).length&&(localStorage.setItem("btnLeft","hide"),localStorage.setItem("btnRight","hide")),localStorage.getItem("size")||localStorage.setItem("size","3"),window.addEventListener("hashchange",(()=>{const t=window.location.hash.split("/");Gt(+t[t.length-1])})),window.addEventListener("load",(()=>{const t=window.location.search;if(0===t.length)Zt.append(Y(p));else{const e=(t=>{const e=t.split("&").map((t=>t.split("=").map((t=>t.split("%E2%86%95")))[1])),o={categories:[],subcategories:[],price:[],stock:[]};e[0]&&(o.categories=e[0]),e[1]&&(o.subcategories=e[1]),e[2]&&(o.price=e[2]),e[3]&&(o.stock=e[3]);let a="",r="";o.categories.length>0&&(a=o.categories.join(" ")),o.subcategories.length>0&&(r=o.subcategories.join(" "));let s=p.filter((t=>a.length&&r.length&&r.includes(t.subcategoryEng)||a.length&&!r.length&&a.includes(t.categoryEng)||!a.length&&r.length&&r.includes(t.subcategoryEng)?t:void 0));return s.length>0&&(s=s.filter((t=>t.price&&!t.stock?t.price>=+o.price[0]&&t.price<=+o.price[1]:t.stock&&!t.price?t.stock>=+o.stock[0]&&t.stock<=+o.stock[1]:t.stock&&t.price?t.stock>=+o.stock[0]&&t.stock<=+o.stock[1]&&t.price>=+o.price[0]&&t.price<=+o.price[1]:t))),s})(t);if(!e.length)return Zt.innerHTML="",Zt.append(Vt());Zt.append(Y(e))}}));const Ut={render:t=>(console.log("id",t),Zt.innerHTML="",Tt(t))},Yt={render:()=>(Zt.innerHTML="",Vt())},Bt=[{path:"/",component:{render:(t=p)=>function(t){const e=document.querySelector(".products__list");return e&&e.remove(),O.append(z(t)),v(),U}(t)}},{path:"/cart",component:{render:()=>(Zt.innerHTML="",gt())}},{path:"/product-details",component:Ut}],Gt=t=>{const e=location.hash.slice(1).toLowerCase()||"/",{component:o=Yt}=(t=>{const e=t.split("/")[1];return Bt.find((t=>t.path.includes(e)))||void 0})(e)||{};Zt.append(o.render(t))};document.addEventListener("click",(t=>{if(t.target instanceof Element&&t.target.parentElement&&t.target.closest(".btn__details")){const e=t.target,o="#/product-details/"+e.id;window.history.pushState({path:o},"",o),e.setAttribute("url",window.location.href),Bt.push({path:window.location.href.split("#")[1],component:Ut}),Gt(Number(e.id))}if(t.target instanceof Element&&t.target.parentElement&&t.target.closest(".btn__add")){(t=>{var e;e=+t.id,"добавлен"===localStorage.getItem(`btn_${e}`)?localStorage.setItem(`btn_${e}`,"в корзину"):localStorage.setItem(`btn_${e}`,"добавлен"),(t=>{let e=JSON.parse(localStorage.getItem("cartList")),o=JSON.parse(localStorage.getItem("cartItems"));e.includes(+t.id)?(e=e.filter((e=>e!==+t.id)),o=o.flat().filter((e=>e.id!==+t.id)),t.textContent=localStorage.getItem(`btn_${t.id}`)):(e.push(+t.id),o.push(p[+t.id]),t.textContent=localStorage.getItem(`btn_${t.id}`)),localStorage.setItem("cartList",JSON.stringify(e)),localStorage.setItem("cartItems",JSON.stringify(ut(o.flat(),+localStorage.getItem("size"))))})(t),(t=>{"в корзину"===localStorage.getItem(`btn_${t.id}`)?(localStorage.setItem("totalPrice",""+(+localStorage.getItem("totalPrice")-p[+t.id].price)),localStorage.setItem("totalStock",String(+localStorage.getItem("totalStock")-2))):"добавлен"===localStorage.getItem("btn_"+ +t.id)&&(localStorage.setItem("totalPrice",`${+localStorage.getItem("totalPrice")+p[+t.id].price}`),localStorage.setItem("totalStock",String(+localStorage.getItem("totalStock"))))})(t),JSON.parse(localStorage.getItem("cartList")).length>+localStorage.getItem("size")?localStorage.setItem("btnRight","show"):localStorage.setItem("btnRight","hide"),JSON.parse(localStorage.getItem("cartList")).length<+localStorage.getItem("size")||"1"===localStorage.getItem("currentPage")?localStorage.setItem("btnLeft","hide"):localStorage.setItem("btnLeft","show"),(t=>{"0"===localStorage.getItem(`quantityProduct_${t.id}`)&&(localStorage.setItem(`quantityProduct_${t.id}`,"1"),localStorage.setItem(`price_${t.id}`,`${p[+t.id].price}`)),document.querySelector(".found-products").textContent=localStorage.getItem("totalStock")})(t),(t=>{localStorage.setItem(`stock_${t.id}`,""+(p[+t.id].stock-1)),localStorage.setItem("totalStock",String(+localStorage.getItem("totalStock")+1))})(t),zt(),Mt()})(t.target)}if(t.target instanceof Element&&t.target.parentElement&&t.target.closest(".btn-switch-page-right")){const e=t.target;(t=>{localStorage.setItem("currentPage",""+(+localStorage.getItem("currentPage")+1)),At(t),document.querySelector(".cart-list").innerHTML="",JSON.parse(localStorage.getItem("cartItems"))[+localStorage.getItem("currentPage")-1].forEach((t=>{yt(t.id)}))})(e),(t=>{+localStorage.getItem("currentPage")===JSON.parse(localStorage.getItem("cartItems")).length?(t.style.transform="scale(0)",localStorage.setItem("btnRight","hide")):localStorage.setItem("btnRight","show"),localStorage.setItem("btnLeft","show"),document.querySelector(".btn-switch-page-left").style.transform="scale(1)"})(e)}if(t.target instanceof Element&&t.target.parentElement&&t.target.closest(".btn-switch-page-left")){const e=t.target;(t=>{localStorage.setItem("currentPage",""+(+localStorage.getItem("currentPage")-1)),Ot(t);const e=JSON.parse(localStorage.getItem("cartItems"))[+localStorage.getItem("currentPage")-1];document.querySelector(".cart-list").innerHTML="",e.forEach((t=>{yt(t.id)}))})(e),(t=>{1==+localStorage.getItem("currentPage")?(t.style.transform="scale(0)",localStorage.setItem("btnLeft","hide")):localStorage.setItem("btnLeft","show"),localStorage.setItem("btnRight","show"),document.querySelector(".btn-switch-page-right").style.transform="scale(1)"})(e)}if(t.target instanceof Element&&t.target.parentElement&&t.target.closest(".delete-item")){((t,e)=>{Ot(t),Nt(t),(t=>{var e;localStorage.setItem(`quantityProduct_${t.id}`,(null===(e=t.parentElement)||void 0===e?void 0:e.querySelector("input")).value);let o=+localStorage.getItem(`stock_${t.id}`);o++,localStorage.setItem(`stock_${t.id}`,`${o}`),document.querySelectorAll(".stock-value").forEach((e=>{e.id===t.id&&(e.value=String(+e.value+1))})),"0"!==localStorage.getItem(`stock_${t.id}`)&&document.querySelectorAll(".add-item").forEach((e=>{e.id===t.id&&(e.style.transform="scale(1)")})),+localStorage.getItem(`stock_${t.id}`)===p[+t.id].stock&&document.querySelectorAll(".delete-item").forEach((e=>{e.id===t.id&&(e.style.transform="scale(0)")}))})(t),(t=>{localStorage.setItem(`price_${t.id}`,String(+localStorage.getItem(`price_${t.id}`)-p[+t.id].price)),document.querySelectorAll(".total-price").forEach((e=>{e.id===t.id&&(e.value=String(+localStorage.getItem(`price_${t.id}`)))})),localStorage.setItem("totalPrice",String(+localStorage.getItem("totalPrice")-p[+t.id].price)),document.querySelector(".total-sum-value").value=localStorage.getItem("totalPrice")})(t),localStorage.getItem("totalStock")||localStorage.setItem("totalStock",`${JSON.parse(localStorage.getItem("cartList")).length}`),localStorage.setItem("totalStock",String(+localStorage.getItem("totalStock")-1)),document.querySelector(".quantity-products-value").value=""+(+document.querySelector(".quantity-products-value").value-1),(t=>{if("0"===localStorage.getItem(`quantityProduct_${t.id}`)){const e=JSON.parse(localStorage.getItem("cartList")).filter((e=>e!==+t.id)),o=JSON.parse(localStorage.getItem("cartItems")).flat().filter((e=>+e.id!=+t.id));localStorage.setItem("cartList",JSON.stringify(e)),localStorage.setItem("cartItems",JSON.stringify(ut(o.flat(),+localStorage.getItem("size")))),localStorage.setItem(`btn_${t.id}`,"в корзину"),document.querySelector(".cart-list").innerHTML="";const a=dt(+localStorage.getItem("size"));a?a.forEach((t=>{yt(+t)})):(localStorage.setItem("currentPage",String(+localStorage.getItem("currentPage")-1)),document.querySelector(".current-page").value=""+(+document.querySelector(".current-page").value-1),dt(+localStorage.getItem("size")).forEach((t=>{yt(t)}))),"1"===localStorage.getItem("currentPage")&&(localStorage.setItem("btnLeft","hide"),document.querySelector(".btn-switch-page-left").style.transform="scale(0)"),document.querySelector("input.quantity").value=JSON.parse(localStorage.getItem("cartList")).length}})(t),JSON.parse(localStorage.getItem("cartList")).length<=+localStorage.getItem("size")&&(localStorage.setItem("btnRight","hide"),document.querySelector(".btn-switch-page-right").style.transform="scale(0)"),+localStorage.getItem("currentPage")===JSON.parse(localStorage.getItem("cartItems")).length&&(localStorage.setItem("btnRight","hide"),document.querySelector(".btn-switch-page-right").style.transform="scale(0)"),Mt(),(t=>{0===JSON.parse(localStorage.getItem("cartList")).length&&(t.innerHTML="",t.append(gt()))})(e),zt()})(t.target,Zt),Pt()}if(t.target instanceof Element&&t.target.parentElement&&t.target.closest(".add-item")){(t=>{At(t),Nt(t),(t=>{let e=+localStorage.getItem(`stock_${t.id}`);e--,localStorage.setItem(`stock_${t.id}`,`${e}`),document.querySelectorAll(".stock-value").forEach((e=>{e.id===t.id&&(e.value=String(+e.value-1))})),"0"===localStorage.getItem(`stock_${t.id}`)&&document.querySelectorAll(".add-item").forEach((e=>{e.id===t.id&&(e.style.transform="scale(0)")})),+localStorage.getItem(`stock_${t.id}`)!==p[+t.id].stock&&document.querySelectorAll(".delete-item").forEach((e=>{e.id===t.id&&(e.style.transform="scale(1)")}))})(t),(t=>{localStorage.setItem(`price_${t.id}`,String(+localStorage.getItem(`price_${t.id}`)+p[+t.id].price)),document.querySelectorAll(".total-price").forEach((e=>{e.id===t.id&&(e.value=localStorage.getItem(`price_${t.id}`))})),localStorage.getItem("totalPrice")?localStorage.setItem("totalPrice",String(+localStorage.getItem("totalPrice")+p[+t.id].price)):localStorage.setItem("totalPrice",String(+localStorage.getItem("totalPrice")+2*p[+t.id].price)),document.querySelector(".total-sum-value").value=localStorage.getItem("totalPrice")})(t),localStorage.getItem("totalStock")||localStorage.setItem("totalStock",`${JSON.parse(localStorage.getItem("cartList")).length}`),localStorage.setItem("totalStock",String(+localStorage.getItem("totalStock")+1)),document.querySelector(".quantity-products-value").value=""+(+document.querySelector(".quantity-products-value").value+1),Mt(),zt()})(t.target),Pt()}var e;t.target instanceof Element&&t.target.parentElement&&t.target.closest(".btn-copy")&&(e=t.target,navigator.clipboard.writeText(`${window.location.href}`).then((()=>{const t=e.textContent;e.textContent="скопировано",setTimeout((()=>{e.textContent=t}),1e3)})).catch((t=>console.error(t))))}));const Wt={categories:[],subcategories:[],currArr:[],price:[],stack:[]};let Ft;Ft=localStorage.getItem("currentProducts")?JSON.parse(localStorage.getItem("currentProducts")):[],document.addEventListener("change",(t=>{const e=t.target,o=document.querySelector("#max-price"),a=document.querySelector("#min-price"),r=document.querySelector("#max-amount"),s=document.querySelector("#min-amount");if(e instanceof Element&&"sort__input"===e.className){0===Ft.length&&(Ft=p);const t=(c=e.value,n=Ft,0!==(c=c.toLowerCase()).length?n.filter((t=>{if(t.category.toLowerCase().includes(c)||t.subcategory.toLowerCase().includes(c)||t.title.toLowerCase().includes(c)||t.description.toLowerCase().includes(c)||t.price.toString().includes(c)||t.discount.toString().includes(c)||t.stock.toString().includes(c)||t.raiting.toString().includes(c))return t})):n);0===t.length?(Ft=Ft,Ht()):(Ft=t,J()),localStorage.setItem("currentProducts",JSON.stringify(Ft)),Rt(Ft),Dt(Ft)}var c,n;if(e instanceof Element&&e.closest(".slider-price")){if(0===Wt.currArr.length)Ft=p.filter((t=>t.price>=+a.value&&t.price<=+o.value)),Wt.currArr=Ft;else{let t=Wt.currArr.filter((t=>t.price>=+a.value&&t.price<=+o.value));0===t.length?(Ft=Wt.currArr,Ht()):(Ft=t,J(),t=[])}localStorage.setItem("currentProducts",JSON.stringify(Ft)),Dt(Ft)}if(e instanceof Element&&e.closest(".slider-amount")){if(0===Wt.currArr.length)Ft=p.filter((t=>t.stock>=+s.value&&t.price<=+r.value)),console.log("categories",Wt.categories),console.log("subcategories",Wt.subcategories);else{let t=Wt.currArr.filter((t=>t.stock>=+s.value&&t.price<=+r.value));0===t.length?(Ft=Wt.currArr,Ht()):(Ft=t,J(),t=[])}localStorage.setItem("currentProducts",JSON.stringify(Ft)),Rt(Ft)}e instanceof Element&&e.closest(".filter-input")&&(Ft=((t,e,o,a)=>{const r=p.filter((e=>e.categoryEng===t.getAttribute("id"))),s=p.filter((e=>e.subcategoryEng===t.getAttribute("id")));if(e.categories=h(e.categories,r),e.categories.length>0){let o=0;e.categories.forEach((t=>{s.forEach((e=>{t.categoryEng==e.categoryEng&&o++}))})),0==o&&s.length>0?(e.subcategories=e.subcategories,!0===t.checked?Ht():J()):(e.subcategories=h(e.subcategories,s),J())}else e.subcategories=h(e.subcategories,s);return e.currArr=0===e.subcategories.length?e.categories:0===e.categories.length?e.subcategories:((t,e)=>{const o=[];for(let a=0;a<e.length;a++)t.some((t=>t.id===e[a].id))&&o.push(e[a]);return o})(e.categories,e.subcategories),t.classList.contains("input-reset")&&(e.currArr=[]),0===e.currArr.length?(e.currArr=p,e.categories=[],e.subcategories=[],[...document.querySelectorAll("label")].forEach((t=>t.classList.remove("checked"))),[...document.querySelectorAll("input")].forEach((t=>(t.checked=!0)?t.checked=!1:t)),e.currArr):e.currArr})(e,Wt,a.value,o.value),Rt(Ft),Dt(Ft),localStorage.setItem("currentProducts",JSON.stringify(Ft)));const i=(t=>[...new Set(t.map((t=>t.categoryEng)))])(Ft),l=(t=>[...new Set(t.map((t=>t.subcategoryEng)))])(Ft),g={},u={};Ft.forEach((t=>{Object.keys(g).includes(t.categoryEng)?g[t.categoryEng]=(g[t.categoryEng]||0)+1:g[t.categoryEng]=1,Object.keys(u).includes(t.subcategoryEng)?u[t.subcategoryEng]=(u[t.subcategoryEng]||0)+1:u[t.subcategoryEng]=1})),localStorage.setItem("currentProducts",JSON.stringify(Ft)),[...document.querySelectorAll(".amount-input-current")].forEach((t=>{Object.keys(g).includes(t.id)?t.value=`${g[t.id]}`:Object.keys(u).includes(t.id)?t.value=`${u[t.id]}`:t.value="0"})),((t,e)=>{[...document.querySelectorAll(".filter-label")].forEach((o=>{const a=o.getAttribute("for");Object.keys(t).includes(a)||Object.keys(e).includes(a)?o.style.opacity="1":o.style.opacity="0.6"}))})(g,u),window.addEventListener("popstate",(()=>{})),window.history.pushState({},"",`${window.location.href}${((t,e,o,a,r,s,c,n)=>{let i="",l="",g="";t.length>0&&(i="category="+t.join("↕")),e.length>0&&(l="subcategory="+e.join("↕")),"sort__input"===n.className&&n.value.length>0&&(g=`&search=${n.value}`);let u=`?${i}&${l}&price=${o}↕${a}&stock=${r}↕${s}${g}`;return c.length===p.length&&(u="/"),u})(i,l,a.value,o.value,s.value,r.value,Ft,e)}`),Gt(Ft)}))})();